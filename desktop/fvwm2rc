###############################################################################
# fvwm2 仿 plan9 rio 
# 根据 difancn@gmail.com 发布在https://code.google.com/p/fvwm-rio/ 的代码修改
#
#
# author: hmy[huangmingyou@gmail.com]


# 特点: 模仿 plan9 的窗口管理器，简单实用


# Alt + 鼠标左键移动窗口
# Alt + 鼠标右键改变窗口大小
# F1 执行 urxvt
# F2 执行 chrome
# F3 瀑布流排列窗口
# F4 平铺窗口
# Alt + F4 关闭窗口
# F6 跳到窗口0
# F7 跳到窗口1
# F8 列出图标化的窗口
# F9 列出当前桌面的窗口
# F10 把windows 虚拟机移动到小屏幕
# F11 隐藏窗口
# F12 锁屏幕
# Win + r 重启 fvwm2
# Win + h/j/k/l 按3%的屏幕像素改变窗口大小(四个方向)
# Win + 方向键  按3%的屏幕像素移动窗口(四个方向)
# Alt + 回车  切换窗口最大化
# Alt + tab 切换窗口
# Win + 数字键 把~/.pass/下对应的文本内容拷贝到粘贴板，随后可以用ctrl+insert 获悉和鼠标中键粘贴（通过xclip)

#################################[ 样式定义 ]##############################################
SetEnv minDesk 0
SetEnv maxDesk 1
DeskTopSize 1x1
DefaultFont "StringEncoding=utf8:xft:Microsoft YaHei:size=10:encoding=iso10646-1"

HideGeometryWindow
ColormapFocus FollowsMouse


Colorset 1 fg black, bg rgb:9e/ee/ee, sh rgb:9e/ee/ee, hi rgb:9e/ee/ee
Colorset 2 fg black, bg rgb:55/aa/aa, sh rgb:55/aa/aa, hi rgb:55/aa/aa
Colorset 3 fg black, bg rgb:e9/ff/e9, sh rgb:88/cc/88, hi rgb:88/cc/88

Style *		BorderWidth 4, !Handles, !Title, !Icon
Style *		ClickToFocus, ClickToFocusPassesClick,ResizeHintOverride
Style *		SmartPlacement
Style * 	BorderColorset 1
Style * 	HilightBorderColorset 2
Style "Fvwm*"		Sticky, WindowListSkip, CirculateSkipIcon, CirculateSkip
Style "Virtual*"	StaysOnBottom, BorderWidth 0



MenuStyle * 	Hilight3DOff, PopupDelayed, PopupDelay 160, SeparatorsLong
MenuStyle * 	ActiveFore white, HilightBack rgb:44/88/44
MenuStyle * 	MenuColorset 3
#################################[ 函数定义 ]##############################################

DestroyMenu RootMenu
AddToMenu RootMenu      "root menu"      Title
+                       "www"         JumpExec google-chrome
+                       "urxvt"         JumpExec urxvt
+                       "evince"         JumpExec evince
+                       "emacs"         JumpExec emacs
+                       ""         Nop
+                       "close window"        Close
+                       "hide window"         Iconify
+                       "F3 window"       FvwmRearrange -cascade -incx -4p  -incy -4p -u  -resize -m  5 5  90 90
+                       "F4 window"       FvwmRearrange -tile -u -mn 2 -resize -m  1 1 99 99
+                       ""         Nop
+                       "restart fvwm"         Restart 
+                       "quit fvwm"         Quit

DestroyFunc Mouse-1-Root
AddToFunc Mouse-1-Root
+       I       Menu RootMenu Nop

DestroyFunc StartFunction
AddToFunc StartFunction
+ I Exec exec xsetroot -solid grey30
+ I Exec exec xset b off
+ I Exec exec xset s off
+ I Exec exec xset -dpms

DestroyFunc JumpExec
AddToFunc JumpExec
+ I All ($0) WindowListFunc
+ I None ($0) Exec exec $* &

DestroyFunc Move-or-Raise
AddToFunc Move-or-Raise		M Move

DestroyFunc Resize-or-Raise
AddToFunc Resize-or-Raise	M Resize

DestroyFunc FuncFvwmConsole
AddToFunc   FuncFvwmConsole
+ I Module FvwmConsole -terminal urxvt -geometry 70x13+7+579 $*

DestroyFunc MoveToCurrentDesk
AddToFunc MoveToCurrentDesk
+ I Iconify off
+ I MoveToDesk 0 $[desk.n]

DestroyFunc WindowListFunc
AddToFunc WindowListFunc
+ I Raise
+ I FlipFocus

DestroyFunc IconifyWindowList
AddToFunc   IconifyWindowList
+ I	WindowList Function MoveToCurrentDesk NoNormal NoHotkeys NoGeometry NoCurrentDeskTitle NoNumInDeskTitle NoDeskNum
#################################[ 鼠标键盘 ]##############################################
Mouse 1 	W	M	Move-or-Raise
Mouse 3 	W	M	Resize-or-Raise
Mouse 1 	R       A       Mouse-1-Root


Key F1		A	A	JumpExec urxvt
Key F2		A	A	JumpExec google-chrome
#Key F2		A	A	JumpExec google-chrome
Key F3		A	A 	FvwmRearrange -cascade -incx -4p  -incy -4p -u  -resize -m  5 5  90 90
Key F4		A	A 	FvwmRearrange -tile -u -mn 2 -resize -m  1 1 99 99


Key F6 		A 	A 	GotoDesk 0 0 
Key F7 		A 	A 	GotoDesk 0 1
Key F8		A	A	IconifyWindowList


Key F9		W 	A 	WindowList Root c c CurrentAtEnd CurrentDesk NoIcons  NoGeometry NoCurrentDeskTitle NoNumInDeskTitle NoDeskNum SelectOnRelease Meta_L 
Key F10 	A 	A 	ResizeMove 1024p 810p 0 0-22p
Key F11		W	A	Iconify
Key F12 	A 	A 	Exec exec slock


Key F4		A 	M 	Close



Key r		A	4	Restart fvwm2
key e		A	M       JumpExec emacs
key g		A	M       JumpExec google-chrome
key u		A	M       JumpExec urxvt
Key v           A       M       exec VBoxManage startvm b5ce7179-20a9-4887-a60f-474c5932dc8e

# Win + h/j/k/l 按5%的屏幕像素改变窗口大小(四个方向)
Key h 		A 	4       ResizeMove w+3 w w-3 w
Key j 		A 	4       ResizeMove w w-3 w w+3
Key k 		A 	4       ResizeMove w w+3 w w-3
Key l 		A 	4       ResizeMove w-3 w w+3 w
# Win + 方向键  按5%的屏幕像素移动窗口(四个方向)
Key Up		A 	4 	Move w w-3
Key Down	A 	4 	Move w w+3
Key Left	A 	4 	Move w-3 w
Key Right	A 	4 	Move w+3 w
Key Return 	A 	M 	Maximize
Key Tab		A	M	WindowList Root c c CurrentAtEnd CurrentDesk NoIcons	NoGeometry NoCurrentDeskTitle NoNumInDeskTitle NoDeskNum SelectOnRelease Meta_L Layer 4



#扩展屏幕的设置
Key 1           A       4       Exec exec xclip ~hmy/.pass/root
Key 2           A       4       Exec exec xclip ~hmy/.pass/google
Key 3           A       4       Exec exec xclip ~hmy/.pass/p3
Key 4           A       4       Exec exec xclip ~hmy/.pass/p4
Key 9           A       4       Exec exec xclip -selection clipboard ~hmy/.pass/p9
